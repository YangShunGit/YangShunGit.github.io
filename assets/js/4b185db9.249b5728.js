/*! For license information please see 4b185db9.249b5728.js.LICENSE.txt */
(self.webpackChunkys_blog=self.webpackChunkys_blog||[]).push([[434],{124:(t,e,r)=>{var n=r(9325);t.exports=function(){return n.Date.now()}},346:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},659:(t,e,r)=>{var n=r(1873),i=Object.prototype,u=i.hasOwnProperty,o=i.toString,c=n?n.toStringTag:void 0;t.exports=function(t){var e=u.call(t,c),r=t[c];try{t[c]=void 0;var n=!0}catch(a){}var i=o.call(t);return n&&(e?t[c]=r:delete t[c]),i}},1800:t=>{var e=/\s/;t.exports=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}},1873:(t,e,r)=>{var n=r(9325).Symbol;t.exports=n},2552:(t,e,r)=>{var n=r(1873),i=r(659),u=r(9350),o=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?i(t):u(t)}},3805:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},4128:(t,e,r)=>{var n=r(1800),i=/^\s+/;t.exports=function(t){return t?t.slice(0,n(t)+1).replace(i,""):t}},4394:(t,e,r)=>{var n=r(2552),i=r(346);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==n(t)}},4741:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>m});var n=r(6540),i=r(6942),u=r.n(i),o=r(1635),c=r(7350),a=r.n(c);const s=function(t){var e=(0,n.useRef)(t);return e.current=t,e};const l=function(t){var e=s(t);(0,n.useEffect)((function(){return function(){e.current()}}),[])};const f=function(t,e){var r,i=s(t),u=null!==(r=null==e?void 0:e.wait)&&void 0!==r?r:1e3,c=(0,n.useMemo)((function(){return a()((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.current.apply(i,(0,o.__spreadArray)([],(0,o.__read)(t),!1))}),u,e)}),[]);return l((function(){c.cancel()})),{run:c,cancel:c.cancel,flush:c.flush}};var d=r(4848);const h=n.forwardRef((({columnWidth:t,index:e,screenRange:r,children:i,rect:u,itemLoaded:o,itemUpdated:c},a)=>{let s=(0,n.useRef)(null);(0,n.useEffect)((()=>{o(e)}),[]),(0,n.useEffect)((()=>{if(s.current){const t=new ResizeObserver((t=>{c(e)}));return t.observe(s.current),()=>t.disconnect()}}),[s.current]),(0,n.useImperativeHandle)(a,(()=>s.current));const l=u?.top||0,[f,h]=r;let p=!1;if((void 0===u?.top||l+(u?.height||0)>=f&&l<=h)&&(p=!0),!p)return null;let v={};return void 0!==u?.left?(v={position:"absolute",top:u?.top||0},u.isLastColumn?v.right=0:v.left=u.left):v={position:"fixed",left:"200%",top:"200%"},v.width=t,(0,d.jsx)("div",{ref:s,"data-index":e,style:v,children:i})})),p=n.forwardRef(((t,e)=>{const{children:r,columns:i=2,gapX:o,gapY:c,pageSize:a=20,threshold:s=250,bufferHeight:l=500,throttleTime:p=300,autoObserve:v=!0,sliceThreshold:g=200,className:m,onScroll:y,...x}=t,b="number"==typeof o?o:0,w="number"==typeof c?c:0;let j=(0,n.useRef)({width:0,height:0,columnWidth:0,columnLeftMap:{}});const S=(0,n.useRef)({}),E=(0,n.useRef)({currentIndex:0,endIndex:0,rects:[],columnsHeight:{0:new Array(i).fill(0)}}),R=(0,n.useRef)([]),T=(0,n.useRef)([]),[O,I]=(0,n.useState)([]),[C,N]=(0,n.useState)([0,0]),[W,A]=(0,n.useState)(1),L=(0,n.useRef)(0),P=()=>{const{currentIndex:t,columnsHeight:e}=E.current;if(void 0!==S.current[t]&&Array.isArray(e[t])){if(L.current>g)return L.current=0,T.current.push(t),void k();const n=[...e[t]];let u=[...n];u.sort(((t,e)=>t-e));const o=n.findIndex((t=>t===u[0])),c=n[o],a=0===c?c:c+w;n[o]=a+(S.current[t].value||0);const[s,l]=C;E.current.rects[t]={top:a,left:j.current.columnLeftMap[o],isLastColumn:o===i-1,height:S.current[t].value},E.current.currentIndex=t+1,E.current.columnsHeight[t+1]=[...n],I([...E.current.rects]);try{L.current+=1,P()}catch(r){}}},{run:k}=f((()=>{T.current.length>0&&(T.current.sort(((t,e)=>t-e)),E.current.currentIndex=T.current[0],E.current.endIndex=T.current[T.current.length-1],T.current=[],L.current=0,P(),L.current=0)}),{wait:p,leading:!1}),H=t=>{if(R.current[t]&&void 0===S.current[t]){const e=R.current[t].getBoundingClientRect();S.current[t]={value:e.height,history:[e.height]},L.current=0,P(),L.current=0}},M=t=>{if(void 0!==t&&R.current[t]){const e=R.current[t].getBoundingClientRect();void 0===S.current[t]?(S.current[t]={value:e.height,history:[e.height]},T.current.push(t),k()):void 0!==S.current[t]?.value&&e.height!==S.current[t].value&&(S.current[t].value=e.height,S.current[t].history.push(e.height),T.current.push(t),k())}};(0,n.useImperativeHandle)(e,(()=>({itemUpdated:M})),[]);const U=n.Children.map(r,((t,e)=>null===a||e<a*W?(0,d.jsx)(h,{columnWidth:j.current.columnWidth,ref:t=>R.current[e]=t,index:e,screenRange:C,rect:O[e],itemLoaded:H,itemUpdated:M,children:t},e):null));return(0,d.jsx)("div",{ref:t=>(t=>{if(t){const e=t.getBoundingClientRect();j.current.height!==e.height&&(j.current.height=e.height,j.current.width=e.width,j.current.columnWidth=Number((j.current.width-(i-1)*b)/i),new Array(i).fill(0).forEach(((t,e)=>{j.current.columnLeftMap[e]=(b+j.current.columnWidth)*e})),N([0,j.current.height]))}})(t),className:u()("waterfall",m),onScroll:t=>{"function"==typeof y&&y(t);const e=t.nativeEvent.target.scrollTop-l,i=t.nativeEvent.target.scrollTop+j.current.height+l;if(N([e,i]),null!==a&&n.Children.count(r)>W*a&&E.current.rects[W*a-1]){const{top:t=0,height:e=0}=E.current.rects[W*a-1];t+e<i+s&&A(W+1)}},...x,children:U})}));let v=["https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png","https://img0.baidu.com/it/u=3739429570,2783758709&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=750","https://gw.alipayobjects.com/zos/antfincdn/LlvErxo8H9/photo-1503185912284-5271ff81b9a8.webp","https://img0.baidu.com/it/u=8013311,3592244460&fm=253&fmt=auto&app=120&f=JPEG?w=500&h=617","https://img2.baidu.com/it/u=3018303209,1765139986&fm=253&fmt=auto&app=120&f=JPEG?w=500&h=722","https://img2.baidu.com/it/u=1533484450,2625314894&fm=253&fmt=auto&app=138&f=JPEG?w=664&h=500"];new Array(10).fill(1).forEach((()=>v=v.concat(v)));const g=({index:t,item:e})=>(0,d.jsxs)("div",{style:{width:"100%",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,d.jsx)("div",{children:t+1}),(0,d.jsx)("img",{width:"100%",height:"auto",src:e})]}),m=()=>{const[t,e]=(0,n.useState)([]);return(0,n.useEffect)((()=>{setTimeout((()=>{e(v),console.warn("data1",v)}),0)}),[]),(0,d.jsx)(p,{style:{background:"white"},className:"my-waterfall",initialNumToRender:50,pageSize:20,columns:5,gapX:20,gapY:20,autoObserve:!0,children:t.map(((t,e)=>(0,d.jsx)(g,{item:`${t}?time=${Date.now()}`,index:e})))})}},4840:(t,e,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=n},6942:(t,e)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t="",e=0;e<arguments.length;e++){var r=arguments[e];r&&(t=o(t,u(r)))}return t}function u(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return i.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var r in t)n.call(t,r)&&t[r]&&(e=o(e,r));return e}function o(t,e){return e?t?t+" "+e:t+e:t}t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},7350:(t,e,r)=>{var n=r(8221),i=r(3805);t.exports=function(t,e,r){var u=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return i(r)&&(u="leading"in r?!!r.leading:u,o="trailing"in r?!!r.trailing:o),n(t,e,{leading:u,maxWait:e,trailing:o})}},8221:(t,e,r)=>{var n=r(3805),i=r(124),u=r(9374),o=Math.max,c=Math.min;t.exports=function(t,e,r){var a,s,l,f,d,h,p=0,v=!1,g=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var r=a,n=s;return a=s=void 0,p=e,f=t.apply(n,r)}function x(t){var r=t-h;return void 0===h||r>=e||r<0||g&&t-p>=l}function b(){var t=i();if(x(t))return w(t);d=setTimeout(b,function(t){var r=e-(t-h);return g?c(r,l-(t-p)):r}(t))}function w(t){return d=void 0,m&&a?y(t):(a=s=void 0,f)}function j(){var t=i(),r=x(t);if(a=arguments,s=this,h=t,r){if(void 0===d)return function(t){return p=t,d=setTimeout(b,e),v?y(t):f}(h);if(g)return clearTimeout(d),d=setTimeout(b,e),y(h)}return void 0===d&&(d=setTimeout(b,e)),f}return e=u(e)||0,n(r)&&(v=!!r.leading,l=(g="maxWait"in r)?o(u(r.maxWait)||0,e):l,m="trailing"in r?!!r.trailing:m),j.cancel=function(){void 0!==d&&clearTimeout(d),p=0,a=h=s=d=void 0},j.flush=function(){return void 0===d?f:w(i())},j}},9325:(t,e,r)=>{var n=r(4840),i="object"==typeof self&&self&&self.Object===Object&&self,u=n||i||Function("return this")();t.exports=u},9350:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},9374:(t,e,r)=>{var n=r(4128),i=r(3805),u=r(4394),o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(u(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=n(t);var r=c.test(t);return r||a.test(t)?s(t.slice(2),r?2:8):o.test(t)?NaN:+t}}}]);