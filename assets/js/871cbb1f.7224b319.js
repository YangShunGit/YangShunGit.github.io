"use strict";(self.webpackChunkys_blog=self.webpackChunkys_blog||[]).push([[6985],{1201:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"\u57fa\u7840\u6838\u5fc3/ES6/\u5b9a\u65f6\u5668\u7684\u5e95\u5c42\u673a\u5236","title":"\u5b9a\u65f6\u5668\u7684\u5e95\u5c42\u673a\u5236","description":"\u6d4f\u89c8\u5668\u4e2d\u7684\u5b9a\u65f6\u5668\uff08setTimeout \u548c setInterval\uff09\u662f\u5b9e\u73b0\u5f02\u6b65\u7f16\u7a0b\u7684\u91cd\u8981\u5de5\u5177\uff0c\u5176\u6267\u884c\u673a\u5236\u4e0e\u6d4f\u89c8\u5668\u7684\u4e8b\u4ef6\u5faa\u73af\uff08Event Loop\uff09\u3001\u7ebf\u7a0b\u534f\u4f5c\u5bc6\u5207\u76f8\u5173\u3002\u4ee5\u4e0b\u4ece\u539f\u7406\u3001\u6d41\u7a0b\u3001\u7ec6\u8282\u548c\u5b9e\u8df5\u89d2\u5ea6\u8be6\u7ec6\u89e3\u6790\uff1a","source":"@site/frontend/\u57fa\u7840\u6838\u5fc3/ES6/\u5b9a\u65f6\u5668\u7684\u5e95\u5c42\u673a\u5236.md","sourceDirName":"\u57fa\u7840\u6838\u5fc3/ES6","slug":"/\u57fa\u7840\u6838\u5fc3/ES6/\u5b9a\u65f6\u5668\u7684\u5e95\u5c42\u673a\u5236","permalink":"/frontend/\u57fa\u7840\u6838\u5fc3/ES6/\u5b9a\u65f6\u5668\u7684\u5e95\u5c42\u673a\u5236","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/frontend/\u57fa\u7840\u6838\u5fc3/ES6/\u5b9a\u65f6\u5668\u7684\u5e95\u5c42\u673a\u5236.md","tags":[],"version":"current","frontMatter":{},"sidebar":"frontend","previous":{"title":"\u539f\u578b\u94fe","permalink":"/frontend/\u57fa\u7840\u6838\u5fc3/ES6/\u539f\u578b\u94fe"},"next":{"title":"\u5f31\u5f15\u7528","permalink":"/frontend/\u57fa\u7840\u6838\u5fc3/ES6/\u5f31\u5f15\u7528"}}');var l=s(4848),t=s(8453);const i={},o=void 0,c={},d=[{value:"<strong>\u4e00\u3001\u5b9a\u65f6\u5668\u7684\u6838\u5fc3\u539f\u7406</strong>",id:"\u4e00\u5b9a\u65f6\u5668\u7684\u6838\u5fc3\u539f\u7406",level:3},{value:"<strong>1. \u6d4f\u89c8\u5668\u7684\u591a\u7ebf\u7a0b\u534f\u4f5c</strong>",id:"1-\u6d4f\u89c8\u5668\u7684\u591a\u7ebf\u7a0b\u534f\u4f5c",level:4},{value:"<strong>2. setTimeout \u7684\u5e95\u5c42\u6d41\u7a0b</strong>",id:"2-settimeout-\u7684\u5e95\u5c42\u6d41\u7a0b",level:4},{value:"<strong>3. setInterval \u7684\u672c\u8d28</strong>",id:"3-setinterval-\u7684\u672c\u8d28",level:4},{value:"<strong>\u4e8c\u3001\u5b9a\u65f6\u5668\u4e0e Event Loop \u7684\u5173\u7cfb</strong>",id:"\u4e8c\u5b9a\u65f6\u5668\u4e0e-event-loop-\u7684\u5173\u7cfb",level:3},{value:"<strong>1. \u5b9a\u65f6\u5668\u56de\u8c03\u5c5e\u4e8e\u5b8f\u4efb\u52a1</strong>",id:"1-\u5b9a\u65f6\u5668\u56de\u8c03\u5c5e\u4e8e\u5b8f\u4efb\u52a1",level:4},{value:"<strong>2. \u5b9a\u65f6\u5668\u5ef6\u8fdf\u7684\u4e0d\u7cbe\u786e\u6027</strong>",id:"2-\u5b9a\u65f6\u5668\u5ef6\u8fdf\u7684\u4e0d\u7cbe\u786e\u6027",level:4},{value:"<strong>3. \u793a\u4f8b\uff1a\u5b9a\u65f6\u5668\u4e0e\u5fae\u4efb\u52a1\u7684\u6267\u884c\u987a\u5e8f</strong>",id:"3-\u793a\u4f8b\u5b9a\u65f6\u5668\u4e0e\u5fae\u4efb\u52a1\u7684\u6267\u884c\u987a\u5e8f",level:4},{value:"<strong>\u4e09\u3001\u5b9a\u65f6\u5668\u7684\u7ec6\u8282\u4e0e\u9677\u9631</strong>",id:"\u4e09\u5b9a\u65f6\u5668\u7684\u7ec6\u8282\u4e0e\u9677\u9631",level:3},{value:"<strong>1. this \u7684\u6307\u5411\u95ee\u9898</strong>",id:"1-this-\u7684\u6307\u5411\u95ee\u9898",level:4},{value:"<strong>2. setInterval \u7684\u7cbe\u5ea6\u95ee\u9898</strong>",id:"2-setinterval-\u7684\u7cbe\u5ea6\u95ee\u9898",level:4},{value:"<strong>3. \u5b9a\u65f6\u5668\u4e0e\u9875\u9762\u751f\u547d\u5468\u671f</strong>",id:"3-\u5b9a\u65f6\u5668\u4e0e\u9875\u9762\u751f\u547d\u5468\u671f",level:4},{value:"<strong>\u56db\u3001\u6d4f\u89c8\u5668\u5b9a\u65f6\u5668\u7684\u4f18\u5316\u4e0e\u66ff\u4ee3\u65b9\u6848</strong>",id:"\u56db\u6d4f\u89c8\u5668\u5b9a\u65f6\u5668\u7684\u4f18\u5316\u4e0e\u66ff\u4ee3\u65b9\u6848",level:3},{value:"<strong>1. \u907f\u514d\u9ad8\u9891\u5b9a\u65f6\u5668</strong>",id:"1-\u907f\u514d\u9ad8\u9891\u5b9a\u65f6\u5668",level:4},{value:"<strong>2. \u4f7f\u7528 MessageChannel \u5b9e\u73b0\u4f4e\u5ef6\u8fdf\u56de\u8c03</strong>",id:"2-\u4f7f\u7528-messagechannel-\u5b9e\u73b0\u4f4e\u5ef6\u8fdf\u56de\u8c03",level:4},{value:"<strong>3. \u5b9a\u65f6\u5668\u4e0e Web Workers</strong>",id:"3-\u5b9a\u65f6\u5668\u4e0e-web-workers",level:4},{value:"<strong>\u4e94\u3001\u603b\u7ed3\uff1a\u6d4f\u89c8\u5668\u5b9a\u65f6\u5668\u7684\u6267\u884c\u6d41\u7a0b</strong>",id:"\u4e94\u603b\u7ed3\u6d4f\u89c8\u5668\u5b9a\u65f6\u5668\u7684\u6267\u884c\u6d41\u7a0b",level:3}];function a(n){const e={br:"br",code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:["\u6d4f\u89c8\u5668\u4e2d\u7684\u5b9a\u65f6\u5668\uff08",(0,l.jsx)(e.code,{children:"setTimeout"})," \u548c ",(0,l.jsx)(e.code,{children:"setInterval"}),"\uff09\u662f\u5b9e\u73b0\u5f02\u6b65\u7f16\u7a0b\u7684\u91cd\u8981\u5de5\u5177\uff0c\u5176\u6267\u884c\u673a\u5236\u4e0e\u6d4f\u89c8\u5668\u7684\u4e8b\u4ef6\u5faa\u73af\uff08Event Loop\uff09\u3001\u7ebf\u7a0b\u534f\u4f5c\u5bc6\u5207\u76f8\u5173\u3002\u4ee5\u4e0b\u4ece\u539f\u7406\u3001\u6d41\u7a0b\u3001\u7ec6\u8282\u548c\u5b9e\u8df5\u89d2\u5ea6\u8be6\u7ec6\u89e3\u6790\uff1a"]}),"\n",(0,l.jsx)(e.h3,{id:"\u4e00\u5b9a\u65f6\u5668\u7684\u6838\u5fc3\u539f\u7406",children:(0,l.jsx)(e.strong,{children:"\u4e00\u3001\u5b9a\u65f6\u5668\u7684\u6838\u5fc3\u539f\u7406"})}),"\n",(0,l.jsx)(e.h4,{id:"1-\u6d4f\u89c8\u5668\u7684\u591a\u7ebf\u7a0b\u534f\u4f5c",children:(0,l.jsx)(e.strong,{children:"1. \u6d4f\u89c8\u5668\u7684\u591a\u7ebf\u7a0b\u534f\u4f5c"})}),"\n",(0,l.jsx)(e.p,{children:"\u6d4f\u89c8\u5668\u662f\u591a\u7ebf\u7a0b\u73af\u5883\uff0c\u4e0e\u5b9a\u65f6\u5668\u76f8\u5173\u7684\u7ebf\u7a0b\u5305\u62ec\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"JS \u4e3b\u7ebf\u7a0b"}),"\uff1a\u6267\u884c JavaScript \u4ee3\u7801\uff0c\u7ef4\u62a4\u6267\u884c\u6808\u548c\u4e8b\u4ef6\u5faa\u73af\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u5b9a\u65f6\u5668\u7ebf\u7a0b"}),"\uff1a\u72ec\u7acb\u4e8e JS \u4e3b\u7ebf\u7a0b\uff0c\u8d1f\u8d23\u8ba1\u65f6\u548c\u56de\u8c03\u8c03\u5ea6\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"UI \u6e32\u67d3\u7ebf\u7a0b"}),"\uff1a\u5904\u7406\u9875\u9762\u7ed8\u5236\uff0c\u4e0e JS \u4e3b\u7ebf\u7a0b\u4e92\u65a5\uff08JS \u6267\u884c\u65f6\u6e32\u67d3\u4f1a\u6682\u505c\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"2-settimeout-\u7684\u5e95\u5c42\u6d41\u7a0b",children:(0,l.jsx)(e.strong,{children:"2. setTimeout \u7684\u5e95\u5c42\u6d41\u7a0b"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-javascript",children:"setTimeout(callback, delay);\n"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u5b9a\u65f6\u5668\u7ebf\u7a0b\u542f\u52a8\u8ba1\u65f6"}),"\uff1a",(0,l.jsx)(e.br,{}),"\n","\u6d4f\u89c8\u5668\u63a5\u6536\u5230 ",(0,l.jsx)(e.code,{children:"setTimeout"})," \u8c03\u7528\u540e\uff0c\u7531\u5b9a\u65f6\u5668\u7ebf\u7a0b\u5f00\u59cb\u8ba1\u65f6\uff0c",(0,l.jsx)(e.strong,{children:"\u4e0d\u963b\u585e JS \u4e3b\u7ebf\u7a0b"}),"\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u5230\u8fbe\u5ef6\u8fdf\u65f6\u95f4\u540e\u5165\u961f"}),"\uff1a",(0,l.jsx)(e.br,{}),"\n","\u5f53\u5ef6\u8fdf\u65f6\u95f4\uff08",(0,l.jsx)(e.code,{children:"delay"}),"\uff09\u5230\u8fbe\uff0c\u5b9a\u65f6\u5668\u7ebf\u7a0b\u5c06 ",(0,l.jsx)(e.code,{children:"callback"})," \u5c01\u88c5\u4e3a",(0,l.jsx)(e.strong,{children:"\u5b8f\u4efb\u52a1"}),"\uff0c\u63a8\u5165",(0,l.jsx)(e.strong,{children:"\u5b8f\u4efb\u52a1\u961f\u5217"}),"\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u4e8b\u4ef6\u5faa\u73af\u8c03\u5ea6\u6267\u884c"}),"\uff1a",(0,l.jsx)(e.br,{}),"\n","\u53ea\u6709\u5f53 JS \u4e3b\u7ebf\u7a0b\u7684\u6267\u884c\u6808\u6e05\u7a7a\uff0c\u4e14",(0,l.jsx)(e.strong,{children:"\u5fae\u4efb\u52a1\u961f\u5217\u5168\u90e8\u6267\u884c\u5b8c\u6bd5"}),"\u540e\uff0c\u624d\u4f1a\u4ece\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u5b9a\u65f6\u5668\u56de\u8c03\u6267\u884c\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"3-setinterval-\u7684\u672c\u8d28",children:(0,l.jsx)(e.strong,{children:"3. setInterval \u7684\u672c\u8d28"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"setInterval"})," \u5e76\u975e\u4e25\u683c\u6309\u56fa\u5b9a\u95f4\u9694\u6267\u884c\uff0c\u5176\u5185\u90e8\u903b\u8f91\u7b49\u4ef7\u4e8e\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-javascript",children:"function setInterval(handler, delay) {\n  let timer = setTimeout(() => {\n    handler();\n    timer = setTimeout(arguments.callee, delay); // \u9012\u5f52\u8c03\u7528\n  }, delay);\n  return timer;\n}\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u5373\u6bcf\u6b21\u56de\u8c03\u6267\u884c\u540e\uff0c\u91cd\u65b0\u8bbe\u7f6e\u4e00\u4e2a ",(0,l.jsx)(e.code,{children:"setTimeout"}),"\uff0c\u56e0\u6b64\u4e24\u6b21\u56de\u8c03\u7684\u95f4\u9694\u662f",(0,l.jsx)(e.strong,{children:"\u524d\u4e00\u6b21\u56de\u8c03\u7ed3\u675f\u5230\u4e0b\u4e00\u6b21\u5f00\u59cb\u7684\u65f6\u95f4"}),"\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"\u4e8c\u5b9a\u65f6\u5668\u4e0e-event-loop-\u7684\u5173\u7cfb",children:(0,l.jsx)(e.strong,{children:"\u4e8c\u3001\u5b9a\u65f6\u5668\u4e0e Event Loop \u7684\u5173\u7cfb"})}),"\n",(0,l.jsx)(e.h4,{id:"1-\u5b9a\u65f6\u5668\u56de\u8c03\u5c5e\u4e8e\u5b8f\u4efb\u52a1",children:(0,l.jsx)(e.strong,{children:"1. \u5b9a\u65f6\u5668\u56de\u8c03\u5c5e\u4e8e\u5b8f\u4efb\u52a1"})}),"\n",(0,l.jsx)(e.p,{children:"\u5728 Event Loop \u4e2d\uff0c\u6267\u884c\u987a\u5e8f\u5982\u4e0b\uff1a"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u6267\u884c\u6808\u4e2d\u7684\u540c\u6b65\u4ee3\u7801\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["\u6e05\u7a7a\u5fae\u4efb\u52a1\u961f\u5217\uff08\u5982 ",(0,l.jsx)(e.code,{children:"Promise.then"}),"\uff09\u3002"]}),"\n",(0,l.jsx)(e.li,{children:"\u4ece\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u4e00\u4e2a\u5b8f\u4efb\u52a1\u6267\u884c\uff08\u53ef\u80fd\u662f\u5b9a\u65f6\u5668\u56de\u8c03\u3001I/O \u56de\u8c03\u7b49\uff09\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u91cd\u590d\u6b65\u9aa4 2-3\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"2-\u5b9a\u65f6\u5668\u5ef6\u8fdf\u7684\u4e0d\u7cbe\u786e\u6027",children:(0,l.jsx)(e.strong,{children:"2. \u5b9a\u65f6\u5668\u5ef6\u8fdf\u7684\u4e0d\u7cbe\u786e\u6027"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u6700\u5c0f\u5ef6\u8fdf\u9650\u5236"}),"\uff1a",(0,l.jsx)(e.br,{}),"\n","\u6839\u636e HTML \u6807\u51c6\uff0c",(0,l.jsx)(e.code,{children:"setTimeout"})," \u7684\u6700\u5c0f\u5ef6\u8fdf\u4e3a ",(0,l.jsx)(e.strong,{children:"4ms"}),"\uff08\u5b9e\u9645\u4e2d\u53ef\u80fd\u56e0\u6d4f\u89c8\u5668\u4f18\u5316\u66f4\u9ad8\uff09\u3002\u82e5\u8bbe\u7f6e ",(0,l.jsx)(e.code,{children:"setTimeout(fn, 0)"}),"\uff0c\u5b9e\u9645\u5ef6\u8fdf\u53ef\u80fd\u662f 4-16ms\uff08\u7ea6 60fps \u5c4f\u5e55\u7684\u5237\u65b0\u95f4\u9694\uff09\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u4e3b\u7ebf\u7a0b\u963b\u585e\u5bfc\u81f4\u5ef6\u8fdf\u53d8\u957f"}),"\uff1a",(0,l.jsx)(e.br,{}),"\n","\u82e5 JS \u4e3b\u7ebf\u7a0b\u88ab\u957f\u65f6\u95f4\u963b\u585e\uff08\u5982\u5bc6\u96c6\u8ba1\u7b97\uff09\uff0c\u5373\u4f7f\u5b9a\u65f6\u5668\u8ba1\u65f6\u7ed3\u675f\uff0c\u56de\u8c03\u4e5f\u65e0\u6cd5\u7acb\u5373\u6267\u884c\uff0c\u5b9e\u9645\u5ef6\u8fdf\u4f1a\u8d85\u8fc7\u8bbe\u5b9a\u7684 ",(0,l.jsx)(e.code,{children:"delay"}),"\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u540e\u53f0\u6807\u7b7e\u4f18\u5316"}),"\uff1a",(0,l.jsx)(e.br,{}),"\n","\u5f53\u6d4f\u89c8\u5668\u6807\u7b7e\u5904\u4e8e\u540e\u53f0\u65f6\uff0c",(0,l.jsx)(e.code,{children:"setTimeout"})," \u5ef6\u8fdf\u53ef\u80fd\u88ab\u5ef6\u957f\u81f3 ",(0,l.jsx)(e.strong,{children:"1000ms"})," \u4ee5\u4e0a\uff08\u51cf\u5c11\u8d44\u6e90\u6d88\u8017\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"3-\u793a\u4f8b\u5b9a\u65f6\u5668\u4e0e\u5fae\u4efb\u52a1\u7684\u6267\u884c\u987a\u5e8f",children:(0,l.jsx)(e.strong,{children:"3. \u793a\u4f8b\uff1a\u5b9a\u65f6\u5668\u4e0e\u5fae\u4efb\u52a1\u7684\u6267\u884c\u987a\u5e8f"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-javascript",children:"console.log('start');\n\nsetTimeout(() => {\n  console.log('timer1');\n  Promise.resolve().then(() => console.log('timer1-micro'));\n}, 0);\n\nPromise.resolve().then(() => {\n  console.log('micro1');\n  setTimeout(() => {\n    console.log('timer2');\n  }, 0);\n});\n\nconsole.log('end');\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u6267\u884c\u987a\u5e8f"}),"\uff1a",(0,l.jsx)(e.br,{}),"\n",(0,l.jsx)(e.code,{children:"start \u2192 end \u2192 micro1 \u2192 timer1 \u2192 timer1-micro \u2192 timer2"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u539f\u56e0\uff1a\u5b9a\u65f6\u5668\u56de\u8c03\u662f\u5b8f\u4efb\u52a1\uff0c\u9700\u7b49\u5fae\u4efb\u52a1\u961f\u5217\uff08",(0,l.jsx)(e.code,{children:"Promise.then"}),"\uff09\u6e05\u7a7a\u540e\u624d\u4f1a\u6267\u884c\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u4e09\u5b9a\u65f6\u5668\u7684\u7ec6\u8282\u4e0e\u9677\u9631",children:(0,l.jsx)(e.strong,{children:"\u4e09\u3001\u5b9a\u65f6\u5668\u7684\u7ec6\u8282\u4e0e\u9677\u9631"})}),"\n",(0,l.jsx)(e.h4,{id:"1-this-\u7684\u6307\u5411\u95ee\u9898",children:(0,l.jsx)(e.strong,{children:"1. this \u7684\u6307\u5411\u95ee\u9898"})}),"\n",(0,l.jsxs)(e.p,{children:["\u5b9a\u65f6\u5668\u56de\u8c03\u4e2d\u7684 ",(0,l.jsx)(e.code,{children:"this"})," \u6307\u5411 ",(0,l.jsx)(e.strong,{children:"window"}),"\uff08\u975e\u4e25\u683c\u6a21\u5f0f\uff09\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-javascript",children:"const obj = {\n  name: 'obj',\n  fn() {\n    setTimeout(function() {\n      console.log(this.name); // \u8f93\u51fa undefined\uff08window \u65e0 name \u5c5e\u6027\uff09\n    }, 100);\n  }\n};\nobj.fn();\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u4fdd\u6301 ",(0,l.jsx)(e.code,{children:"this"})," \u7ed1\u5b9a\uff1a",(0,l.jsx)(e.br,{}),"\n",(0,l.jsx)(e.code,{children:"setTimeout(() => console.log(this.name), 100);"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"bind"})," \u7ed1\u5b9a\u4e0a\u4e0b\u6587\uff1a",(0,l.jsx)(e.br,{}),"\n",(0,l.jsx)(e.code,{children:"setTimeout(function() {}.bind(obj), 100);"})]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"2-setinterval-\u7684\u7cbe\u5ea6\u95ee\u9898",children:(0,l.jsx)(e.strong,{children:"2. setInterval \u7684\u7cbe\u5ea6\u95ee\u9898"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-javascript",children:"let start = Date.now();\nsetInterval(() => {\n  console.log(Date.now() - start);\n  // \u5047\u8bbe\u6b64\u5904\u6709\u8017\u65f6 50ms \u7684\u64cd\u4f5c\n  for (let i = 0; i < 10000000; i++);\n}, 100); // \u671f\u671b\u6bcf 100ms \u6267\u884c\u4e00\u6b21\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u5b9e\u9645\u95f4\u9694"}),"\uff1a\u6bcf\u6b21\u56de\u8c03\u7684\u8017\u65f6\u4f1a\u7d2f\u79ef\u5230\u4e0b\u4e00\u6b21\u6267\u884c\uff0c\u5bfc\u81f4\u5b9e\u9645\u95f4\u9694\u5927\u4e8e 100ms\u3002",(0,l.jsx)(e.br,{}),"\n",(0,l.jsx)(e.strong,{children:"\u63a8\u8350\u65b9\u6848"}),"\uff1a\u7528 ",(0,l.jsx)(e.code,{children:"setTimeout"})," \u9012\u5f52\u5b9e\u73b0\u66f4\u7cbe\u786e\u7684\u95f4\u9694\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-javascript",children:"function preciseInterval(handler, delay) {\n  let timer = null;\n  function loop() {\n    const start = Date.now();\n    handler();\n    // \u8ba1\u7b97\u5269\u4f59\u65f6\u95f4\uff0c\u786e\u4fdd\u95f4\u9694\u51c6\u786e\n    const elapsed = Date.now() - start;\n    timer = setTimeout(loop, Math.max(0, delay - elapsed));\n  }\n  loop();\n  return {\n    cancel() { clearTimeout(timer); }\n  };\n}\n"})}),"\n",(0,l.jsx)(e.h4,{id:"3-\u5b9a\u65f6\u5668\u4e0e\u9875\u9762\u751f\u547d\u5468\u671f",children:(0,l.jsx)(e.strong,{children:"3. \u5b9a\u65f6\u5668\u4e0e\u9875\u9762\u751f\u547d\u5468\u671f"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u9875\u9762\u5378\u8f7d\u65f6\u6e05\u9664\u5b9a\u65f6\u5668"}),"\uff1a",(0,l.jsx)(e.br,{}),"\n","\u907f\u514d\u5185\u5b58\u6cc4\u6f0f\uff0c\u9700\u5728 ",(0,l.jsx)(e.code,{children:"beforeunload"})," \u6216 ",(0,l.jsx)(e.code,{children:"unload"})," \u4e8b\u4ef6\u4e2d\u8c03\u7528 ",(0,l.jsx)(e.code,{children:"clearTimeout/clearInterval"}),"\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u540e\u53f0\u6807\u7b7e\u7684\u5b9a\u65f6\u5668\u4f18\u5316"}),"\uff1a",(0,l.jsx)(e.br,{}),"\n","\u53ef\u901a\u8fc7 ",(0,l.jsx)(e.code,{children:"Page Visibility API"})," \u76d1\u542c\u9875\u9762\u53ef\u89c1\u6027\uff0c\u6682\u505c/\u6062\u590d\u5b9a\u65f6\u5668\uff1a","\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-javascript",children:"let timer;\nfunction startTimer() {\n  timer = setInterval(() => { /* \u6267\u884c\u4efb\u52a1 */ }, 1000);\n}\nfunction stopTimer() {\n  clearInterval(timer);\n}\n\ndocument.addEventListener('visibilitychange', () => {\n  if (document.hidden) {\n    stopTimer();\n  } else {\n    startTimer();\n  }\n});\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u56db\u6d4f\u89c8\u5668\u5b9a\u65f6\u5668\u7684\u4f18\u5316\u4e0e\u66ff\u4ee3\u65b9\u6848",children:(0,l.jsx)(e.strong,{children:"\u56db\u3001\u6d4f\u89c8\u5668\u5b9a\u65f6\u5668\u7684\u4f18\u5316\u4e0e\u66ff\u4ee3\u65b9\u6848"})}),"\n",(0,l.jsx)(e.h4,{id:"1-\u907f\u514d\u9ad8\u9891\u5b9a\u65f6\u5668",children:(0,l.jsx)(e.strong,{children:"1. \u907f\u514d\u9ad8\u9891\u5b9a\u65f6\u5668"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u82e5\u9700 60fps \u7684\u52a8\u753b\uff0c\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"requestAnimationFrame"}),"\uff08\u7531\u6d4f\u89c8\u5668\u4f18\u5316\u8c03\u5ea6\uff0c\u4e0e\u5c4f\u5e55\u5237\u65b0\u540c\u6b65\uff09\uff1a","\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-javascript",children:"function animate() {\n  // \u52a8\u753b\u903b\u8f91\n  requestAnimationFrame(animate);\n}\nrequestAnimationFrame(animate);\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"2-\u4f7f\u7528-messagechannel-\u5b9e\u73b0\u4f4e\u5ef6\u8fdf\u56de\u8c03",children:(0,l.jsx)(e.strong,{children:"2. \u4f7f\u7528 MessageChannel \u5b9e\u73b0\u4f4e\u5ef6\u8fdf\u56de\u8c03"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"MessageChannel"})," \u7684\u6d88\u606f\u4f20\u9012\u5c5e\u4e8e\u5fae\u4efb\u52a1\uff0c\u53ef\u7528\u4e8e\u9700\u8981\u66f4\u5feb\u54cd\u5e94\u7684\u573a\u666f\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-javascript",children:"const channel = new MessageChannel();\nconst { port1, port2 } = channel;\n\nport1.onmessage = (event) => {\n  console.log('\u5fae\u4efb\u52a1\u56de\u8c03', event.data);\n};\n\n// \u89e6\u53d1\u5fae\u4efb\u52a1\u56de\u8c03\nport2.postMessage('hello');\n"})}),"\n",(0,l.jsx)(e.h4,{id:"3-\u5b9a\u65f6\u5668\u4e0e-web-workers",children:(0,l.jsx)(e.strong,{children:"3. \u5b9a\u65f6\u5668\u4e0e Web Workers"})}),"\n",(0,l.jsx)(e.p,{children:"\u82e5\u5b9a\u65f6\u5668\u4efb\u52a1\u8017\u65f6\u8f83\u957f\uff0c\u53ef\u653e\u5165 Web Worker \u4e2d\u6267\u884c\uff0c\u907f\u514d\u963b\u585e\u4e3b\u7ebf\u7a0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-javascript",children:"// main.js\nconst worker = new Worker('worker.js');\nworker.postMessage('start timer');\n\n// worker.js\nself.onmessage = (event) => {\n  setTimeout(() => {\n    self.postMessage('\u5b9a\u65f6\u5668\u5728 Worker \u4e2d\u6267\u884c');\n  }, 1000);\n};\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u4e94\u603b\u7ed3\u6d4f\u89c8\u5668\u5b9a\u65f6\u5668\u7684\u6267\u884c\u6d41\u7a0b",children:(0,l.jsx)(e.strong,{children:"\u4e94\u3001\u603b\u7ed3\uff1a\u6d4f\u89c8\u5668\u5b9a\u65f6\u5668\u7684\u6267\u884c\u6d41\u7a0b"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"setTimeout/setInterval"})," \u7531\u6d4f\u89c8\u5668\u5b9a\u65f6\u5668\u7ebf\u7a0b\u72ec\u7acb\u8ba1\u65f6\uff0c\u4e0d\u963b\u585e JS \u4e3b\u7ebf\u7a0b\u3002"]}),"\n",(0,l.jsx)(e.li,{children:"\u8ba1\u65f6\u7ed3\u675f\u540e\uff0c\u56de\u8c03\u4f5c\u4e3a\u5b8f\u4efb\u52a1\u8fdb\u5165\u5b8f\u4efb\u52a1\u961f\u5217\uff0c\u7b49\u5f85 Event Loop \u8c03\u5ea6\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u6267\u884c\u987a\u5e8f\u53d7\u5fae\u4efb\u52a1\u5f71\u54cd\uff1a\u9700\u7b49\u5f53\u524d\u5fae\u4efb\u52a1\u961f\u5217\u6e05\u7a7a\u540e\u624d\u4f1a\u6267\u884c\u5b9a\u65f6\u5668\u56de\u8c03\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u5b9a\u65f6\u5668\u5ef6\u8fdf\u5b58\u5728\u4e0d\u7cbe\u786e\u6027\uff0c\u53d7\u4e3b\u7ebf\u7a0b\u963b\u585e\u3001\u6d4f\u89c8\u5668\u4f18\u5316\u7b49\u56e0\u7d20\u5f71\u54cd\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["\u5b9e\u9645\u5f00\u53d1\u4e2d\u9700\u6ce8\u610f ",(0,l.jsx)(e.code,{children:"this"})," \u7ed1\u5b9a\u3001\u7cbe\u5ea6\u95ee\u9898\uff0c\u5e76\u6839\u636e\u573a\u666f\u9009\u62e9\u5408\u9002\u7684\u66ff\u4ee3\u65b9\u6848\uff08\u5982 ",(0,l.jsx)(e.code,{children:"requestAnimationFrame"}),"\u3001Web Workers\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7406\u89e3\u5b9a\u65f6\u5668\u7684\u5e95\u5c42\u673a\u5236\uff0c\u6709\u52a9\u4e8e\u7f16\u5199\u66f4\u9ad8\u6548\u3001\u53ef\u9760\u7684\u5f02\u6b65\u4ee3\u7801\uff0c\u907f\u514d\u56e0\u673a\u5236\u4e0d\u719f\u6089\u5bfc\u81f4\u7684\u6027\u80fd\u95ee\u9898\u6216\u903b\u8f91\u9519\u8bef\u3002"})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>i,x:()=>o});var r=s(6540);const l={},t=r.createContext(l);function i(n){const e=r.useContext(t);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:i(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);