"use strict";(self.webpackChunkys_blog=self.webpackChunkys_blog||[]).push([[967],{8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>i});var s=t(6540);const r={},o=s.createContext(r);function c(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(o.Provider,{value:n},e.children)}},8847:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"\u57fa\u7840\u6838\u5fc3/typescript/react\u5e38\u7528\u7c7b\u578b\u58f0\u540d","title":"react\u5e38\u7528\u7c7b\u578b\u58f0\u540d","description":"\u4ee5\u4e0b\u662f React \u4e2d\u5e38\u7528\u7684 TypeScript \u7c7b\u578b\u58f0\u660e\u6c47\u603b\uff0c\u6db5\u76d6\u7ec4\u4ef6\u3001Hooks\u3001\u4e8b\u4ef6\u5904\u7406\u3001\u4e0a\u4e0b\u6587\u7b49\u6838\u5fc3\u573a\u666f\uff1a","source":"@site/frontend/\u57fa\u7840\u6838\u5fc3/typescript/react\u5e38\u7528\u7c7b\u578b\u58f0\u540d.md","sourceDirName":"\u57fa\u7840\u6838\u5fc3/typescript","slug":"/\u57fa\u7840\u6838\u5fc3/typescript/react\u5e38\u7528\u7c7b\u578b\u58f0\u540d","permalink":"/frontend/\u57fa\u7840\u6838\u5fc3/typescript/react\u5e38\u7528\u7c7b\u578b\u58f0\u540d","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/frontend/\u57fa\u7840\u6838\u5fc3/typescript/react\u5e38\u7528\u7c7b\u578b\u58f0\u540d.md","tags":[],"version":"current","frontMatter":{},"sidebar":"frontend","previous":{"title":"\u8fdb\u7a0b","permalink":"/frontend/\u57fa\u7840\u6838\u5fc3/nodejs/\u8fdb\u7a0b"},"next":{"title":"\u57fa\u7840\u8bed\u6cd5","permalink":"/frontend/\u57fa\u7840\u6838\u5fc3/typescript/\u57fa\u7840\u8bed\u6cd5"}}');var r=t(4848),o=t(8453);const c={},i=void 0,l={},d=[{value:"<strong>1. \u51fd\u6570\u7ec4\u4ef6\u7c7b\u578b</strong>",id:"1-\u51fd\u6570\u7ec4\u4ef6\u7c7b\u578b",level:3},{value:"<strong>2. \u65e0 <code>children</code> \u7684\u7ec4\u4ef6</strong>",id:"2-\u65e0-children-\u7684\u7ec4\u4ef6",level:3},{value:"<strong>3. \u7c7b\u7ec4\u4ef6\u7c7b\u578b</strong>",id:"3-\u7c7b\u7ec4\u4ef6\u7c7b\u578b",level:3},{value:"<strong>4. useState Hook \u7c7b\u578b</strong>",id:"4-usestate-hook-\u7c7b\u578b",level:3},{value:"<strong>5. useEffect Hook \u7c7b\u578b</strong>",id:"5-useeffect-hook-\u7c7b\u578b",level:3},{value:"<strong>6. useReducer Hook \u7c7b\u578b</strong>",id:"6-usereducer-hook-\u7c7b\u578b",level:3},{value:"<strong>7. useContext Hook \u7c7b\u578b</strong>",id:"7-usecontext-hook-\u7c7b\u578b",level:3},{value:"<strong>8. \u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u7c7b\u578b</strong>",id:"8-\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u7c7b\u578b",level:3},{value:"<strong>9. Ref \u7c7b\u578b</strong>",id:"9-ref-\u7c7b\u578b",level:3},{value:"<strong>10. \u9ad8\u9636\u7ec4\u4ef6\uff08HOC\uff09\u7c7b\u578b</strong>",id:"10-\u9ad8\u9636\u7ec4\u4ef6hoc\u7c7b\u578b",level:3},{value:"<strong>11. \u81ea\u5b9a\u4e49 Hook \u7c7b\u578b</strong>",id:"11-\u81ea\u5b9a\u4e49-hook-\u7c7b\u578b",level:3},{value:"<strong>12. \u7ec4\u4ef6 prop \u7c7b\u578b\u5de5\u5177</strong>",id:"12-\u7ec4\u4ef6-prop-\u7c7b\u578b\u5de5\u5177",level:3},{value:"<strong>13. \u4e25\u683c\u6a21\u5f0f\u7c7b\u578b</strong>",id:"13-\u4e25\u683c\u6a21\u5f0f\u7c7b\u578b",level:3},{value:"<strong>14. React Router \u7c7b\u578b</strong>",id:"14-react-router-\u7c7b\u578b",level:3},{value:"<strong>\u603b\u7ed3</strong>",id:"\u603b\u7ed3",level:3}];function a(e){const n={code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f React \u4e2d\u5e38\u7528\u7684 TypeScript \u7c7b\u578b\u58f0\u660e\u6c47\u603b\uff0c\u6db5\u76d6\u7ec4\u4ef6\u3001Hooks\u3001\u4e8b\u4ef6\u5904\u7406\u3001\u4e0a\u4e0b\u6587\u7b49\u6838\u5fc3\u573a\u666f\uff1a"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u51fd\u6570\u7ec4\u4ef6\u7c7b\u578b",children:(0,r.jsx)(n.strong,{children:"1. \u51fd\u6570\u7ec4\u4ef6\u7c7b\u578b"})}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"React.FC"}),"\uff08\u6216 ",(0,r.jsx)(n.code,{children:"React.FunctionComponent"}),"\uff09\u5b9a\u4e49\u51fd\u6570\u7ec4\u4ef6\uff0c\u81ea\u52a8\u5305\u542b ",(0,r.jsx)(n.code,{children:"children"})," \u7c7b\u578b\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import React from 'react';\n\n// \u57fa\u7840\u7ec4\u4ef6\nconst MyComponent: React.FC = () => {\n  return <div>Hello World</div>;\n};\n\n// \u5e26 props \u7684\u7ec4\u4ef6\ntype MyComponentProps = {\n  name: string;\n  age?: number;\n  onClick?: () => void;\n};\n\nconst MyComponentWithProps: React.FC<MyComponentProps> = ({\n  name,\n  age = 0,\n  onClick,\n}) => {\n  return (\n    <div onClick={onClick}>\n      Name: {name}, Age: {age}\n    </div>\n  );\n};\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u65e0-children-\u7684\u7ec4\u4ef6",children:(0,r.jsxs)(n.strong,{children:["2. \u65e0 ",(0,r.jsx)(n.code,{children:"children"})," \u7684\u7ec4\u4ef6"]})}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"React.VoidFunctionComponent"}),"\uff08\u6216 ",(0,r.jsx)(n.code,{children:"React.VFC"}),"\uff09\u521b\u5efa\u4e0d\u542b ",(0,r.jsx)(n.code,{children:"children"})," \u7684\u7ec4\u4ef6\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type Props = { message: string };\nconst MyComponent: React.VFC<Props> = ({ message }) => (\n  <div>{message}</div>\n);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-\u7c7b\u7ec4\u4ef6\u7c7b\u578b",children:(0,r.jsx)(n.strong,{children:"3. \u7c7b\u7ec4\u4ef6\u7c7b\u578b"})}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"React.Component"})," \u6216 ",(0,r.jsx)(n.code,{children:"React.PureComponent"})," \u5b9a\u4e49\u7c7b\u7ec4\u4ef6\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type Props = { name: string };\ntype State = { count: number };\n\nclass MyClassComponent extends React.Component<Props, State> {\n  state: State = { count: 0 };\n\n  increment = () => {\n    this.setState({ count: this.state.count + 1 });\n  };\n\n  render() {\n    return (\n      <div>\n        {this.props.name}: {this.state.count}\n        <button onClick={this.increment}>Increment</button>\n      </div>\n    );\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-usestate-hook-\u7c7b\u578b",children:(0,r.jsx)(n.strong,{children:"4. useState Hook \u7c7b\u578b"})}),"\n",(0,r.jsx)(n.p,{children:"\u663e\u5f0f\u6307\u5b9a\u72b6\u6001\u7c7b\u578b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import React, { useState } from 'react';\n\n// \u81ea\u52a8\u63a8\u65ad\u7c7b\u578b\nconst [count, setCount] = useState(0); // number \u7c7b\u578b\n\n// \u663e\u5f0f\u6307\u5b9a\u7c7b\u578b\nconst [name, setName] = useState<string | null>(null);\n\n// \u590d\u6742\u7c7b\u578b\ntype User = { id: number; name: string };\nconst [user, setUser] = useState<User>({ id: 1, name: 'Alice' });\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-useeffect-hook-\u7c7b\u578b",children:(0,r.jsx)(n.strong,{children:"5. useEffect Hook \u7c7b\u578b"})}),"\n",(0,r.jsx)(n.p,{children:"\u4f9d\u8d56\u9879\u6570\u7ec4\u9700\u4e0e\u56de\u8c03\u51fd\u6570\u4e2d\u4f7f\u7528\u7684\u53d8\u91cf\u7c7b\u578b\u5339\u914d\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"useEffect(() => {\n  // \u526f\u4f5c\u7528\u903b\u8f91\n  return () => {\n    // \u6e05\u7406\u903b\u8f91\n  };\n}, [dependency]); // dependency \u5fc5\u987b\u662f\u7a33\u5b9a\u7684\u7c7b\u578b\n"})}),"\n",(0,r.jsx)(n.h3,{id:"6-usereducer-hook-\u7c7b\u578b",children:(0,r.jsx)(n.strong,{children:"6. useReducer Hook \u7c7b\u578b"})}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a reducer \u548c\u521d\u59cb\u72b6\u6001\u5b9a\u4e49\u7c7b\u578b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type Action =\n  | { type: 'INCREMENT' }\n  | { type: 'DECREMENT' }\n  | { type: 'SET', payload: number };\n\ntype State = number;\n\nconst initialState: State = 0;\n\nconst reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'INCREMENT':\n      return state + 1;\n    case 'DECREMENT':\n      return state - 1;\n    case 'SET':\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nconst [state, dispatch] = useReducer(reducer, initialState);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"7-usecontext-hook-\u7c7b\u578b",children:(0,r.jsx)(n.strong,{children:"7. useContext Hook \u7c7b\u578b"})}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a\u4e0a\u4e0b\u6587\u521b\u5efa\u5f3a\u7c7b\u578b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// \u521b\u5efa\u4e0a\u4e0b\u6587\ntype ThemeContextType = {\n  theme: 'light' | 'dark';\n  toggleTheme: () => void;\n};\n\nconst ThemeContext = React.createContext<ThemeContextType | undefined>(\n  undefined\n);\n\n// \u4f7f\u7528\u4e0a\u4e0b\u6587\nconst theme = useContext(ThemeContext); // ThemeContextType | undefined\n"})}),"\n",(0,r.jsx)(n.h3,{id:"8-\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u7c7b\u578b",children:(0,r.jsx)(n.strong,{children:"8. \u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u7c7b\u578b"})}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a DOM \u4e8b\u4ef6\u6307\u5b9a\u7c7b\u578b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n  console.log(e.currentTarget.id);\n};\n\nconst handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n  console.log(e.target.value);\n};\n\n<button onClick={handleClick}>Click me</button>\n<input type="text" onChange={handleChange} />\n'})}),"\n",(0,r.jsx)(n.h3,{id:"9-ref-\u7c7b\u578b",children:(0,r.jsx)(n.strong,{children:"9. Ref \u7c7b\u578b"})}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"React.RefObject"})," \u6216 ",(0,r.jsx)(n.code,{children:"React.MutableRefObject"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// DOM ref\nconst inputRef = useRef<HTMLInputElement>(null);\n\n// \u8bbf\u95ee ref\nconst focusInput = () => {\n  inputRef.current?.focus();\n};\n\n// \u975e DOM ref\nconst timerRef = useRef<NodeJS.Timeout | null>(null);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"10-\u9ad8\u9636\u7ec4\u4ef6hoc\u7c7b\u578b",children:(0,r.jsx)(n.strong,{children:"10. \u9ad8\u9636\u7ec4\u4ef6\uff08HOC\uff09\u7c7b\u578b"})}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528\u6cdb\u578b\u4fdd\u6301\u7c7b\u578b\u5b89\u5168\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type PropsWithLoading = { isLoading: boolean };\n\nfunction withLoading<T extends object>(\n  WrappedComponent: React.ComponentType<T>\n): React.ComponentType<T & PropsWithLoading> {\n  return (props: T & PropsWithLoading) => {\n    const { isLoading, ...rest } = props;\n    return isLoading ? <div>Loading...</div> : <WrappedComponent {...rest} />;\n  };\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"11-\u81ea\u5b9a\u4e49-hook-\u7c7b\u578b",children:(0,r.jsx)(n.strong,{children:"11. \u81ea\u5b9a\u4e49 Hook \u7c7b\u578b"})}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a\u8fd4\u56de\u503c\u5b9a\u4e49\u7c7b\u578b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type UseCounterResult = {\n  count: number;\n  increment: () => void;\n  decrement: () => void;\n};\n\nfunction useCounter(initialValue: number = 0): UseCounterResult {\n  const [count, setCount] = useState(initialValue);\n  const increment = () => setCount(c => c + 1);\n  const decrement = () => setCount(c => c - 1);\n  return { count, increment, decrement };\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"12-\u7ec4\u4ef6-prop-\u7c7b\u578b\u5de5\u5177",children:(0,r.jsx)(n.strong,{children:"12. \u7ec4\u4ef6 prop \u7c7b\u578b\u5de5\u5177"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.ComponentProps"}),"\uff1a\u83b7\u53d6\u7ec4\u4ef6\u7684 props \u7c7b\u578b"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.ComponentPropsWithoutRef"}),"\uff1a\u83b7\u53d6\u7ec4\u4ef6\u7684 props \u7c7b\u578b\uff08\u4e0d\u542b ref\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"React.ElementType"}),"\uff1a\u8868\u793a\u7ec4\u4ef6\u7c7b\u578b"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// \u83b7\u53d6 Button \u7ec4\u4ef6\u7684 props \u7c7b\u578b\ntype ButtonProps = React.ComponentProps<'button'>;\n\n// \u521b\u5efa\u63a5\u53d7\u4efb\u610f\u7ec4\u4ef6\u7684\u9ad8\u9636\u7ec4\u4ef6\ntype AsProp<C extends React.ElementType> = {\n  as?: C;\n};\n\ntype PropsToOmit<C extends React.ElementType, P> = keyof (AsProp<C> & P);\n\ntype PolymorphicComponentProps<\n  C extends React.ElementType,\n  Props = {}\n> = React.PropsWithChildren<Props & AsProp<C>> &\n  Omit<React.ComponentPropsWithoutRef<C>, PropsToOmit<C, Props>>;\n\n// \u4f7f\u7528\u793a\u4f8b\nconst Box = <C extends React.ElementType = 'div'>(\n  props: PolymorphicComponentProps<C>\n) => {\n  const { as = 'div', ...rest } = props;\n  return <as {...rest} />;\n};\n"})}),"\n",(0,r.jsx)(n.h3,{id:"13-\u4e25\u683c\u6a21\u5f0f\u7c7b\u578b",children:(0,r.jsx)(n.strong,{children:"13. \u4e25\u683c\u6a21\u5f0f\u7c7b\u578b"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 ",(0,r.jsx)(n.code,{children:"tsconfig.json"})," \u4e2d\u542f\u7528 ",(0,r.jsx)(n.code,{children:"strict: true"})," \u4ee5\u83b7\u5f97\u66f4\u4e25\u683c\u7684\u7c7b\u578b\u68c0\u67e5\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "strict": true,\n    "jsx": "react-jsx"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"14-react-router-\u7c7b\u578b",children:(0,r.jsx)(n.strong,{children:"14. React Router \u7c7b\u578b"})}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a\u8def\u7531\u7ec4\u4ef6\u6dfb\u52a0\u7c7b\u578b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useParams, useLocation } from 'react-router-dom';\n\n// \u4f7f\u7528\u8def\u7531\u53c2\u6570\ntype RouteParams = {\n  id: string;\n};\n\nconst MyComponent = () => {\n  const params = useParams<RouteParams>();\n  const location = useLocation();\n  return <div>ID: {params.id}</div>;\n};\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u603b\u7ed3",children:(0,r.jsx)(n.strong,{children:"\u603b\u7ed3"})}),"\n",(0,r.jsx)(n.p,{children:"React \u4e0e TypeScript \u7ed3\u5408\u65f6\uff0c\u6838\u5fc3\u662f\u901a\u8fc7\u6cdb\u578b\u548c\u63a5\u53e3\u4e3a\u7ec4\u4ef6\u3001\u72b6\u6001\u3001\u4e8b\u4ef6\u7b49\u63d0\u4f9b\u7c7b\u578b\u5b9a\u4e49\u3002\u4e3b\u8981\u6ce8\u610f\u70b9\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"React.FC"})," \u6216\u76f4\u63a5\u5b9a\u4e49 props \u63a5\u53e3"]}),"\n",(0,r.jsxs)(n.li,{children:["\u4e3a Hooks\uff08\u5982 ",(0,r.jsx)(n.code,{children:"useState"}),"\u3001",(0,r.jsx)(n.code,{children:"useReducer"}),"\uff09\u663e\u5f0f\u6307\u5b9a\u7c7b\u578b"]}),"\n",(0,r.jsxs)(n.li,{children:["\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"React.*Event"})," \u7c7b\u578b"]}),"\n",(0,r.jsxs)(n.li,{children:["Ref \u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"React.RefObject"})," \u6216 ",(0,r.jsx)(n.code,{children:"React.MutableRefObject"})]}),"\n",(0,r.jsx)(n.li,{children:"\u9ad8\u9636\u7ec4\u4ef6\u548c\u81ea\u5b9a\u4e49 Hook \u4f7f\u7528\u6cdb\u578b\u4fdd\u6301\u7c7b\u578b\u5b89\u5168"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5408\u7406\u7684\u7c7b\u578b\u5b9a\u4e49\u80fd\u6781\u5927\u63d0\u5347\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u53ef\u9760\u6027\u3002"})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);