"use strict";(self.webpackChunkys_blog=self.webpackChunkys_blog||[]).push([[783],{7407:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>a,frontMatter:()=>c,metadata:()=>o,toc:()=>i});const o=JSON.parse('{"id":"\u524d\u7aef\u6846\u67b6/React/context\u7684\u591a\u79cd\u7528\u6cd5","title":"context\u7684\u591a\u79cd\u7528\u6cd5","description":"\u5728 React \u4e2d\uff0cContext API \u7528\u4e8e\u8de8\u5c42\u7ea7\u4f20\u9012\u6570\u636e\uff0c\u907f\u514d props drilling\u3002Class \u7ec4\u4ef6\u548c\u51fd\u6570\u7ec4\u4ef6\u4f7f\u7528 Context \u7684\u65b9\u5f0f\u6709\u6240\u4e0d\u540c\uff0c\u4ee5\u4e0b\u662f\u5b83\u4eec\u7684\u591a\u79cd\u7528\u6cd5\u53ca\u793a\u4f8b\uff1a","source":"@site/frontend/\u524d\u7aef\u6846\u67b6/React/context\u7684\u591a\u79cd\u7528\u6cd5.md","sourceDirName":"\u524d\u7aef\u6846\u67b6/React","slug":"/\u524d\u7aef\u6846\u67b6/React/context\u7684\u591a\u79cd\u7528\u6cd5","permalink":"/frontend/\u524d\u7aef\u6846\u67b6/React/context\u7684\u591a\u79cd\u7528\u6cd5","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/frontend/\u524d\u7aef\u6846\u67b6/React/context\u7684\u591a\u79cd\u7528\u6cd5.md","tags":[],"version":"current","frontMatter":{},"sidebar":"frontend","previous":{"title":"class\u7ec4\u4ef6\u65b0\u589e\u7684\u4e24\u4e2a\u751f\u547d\u5468\u671f","permalink":"/frontend/\u524d\u7aef\u6846\u67b6/React/class\u7ec4\u4ef6\u65b0\u589e\u7684\u4e24\u4e2a\u751f\u547d\u5468\u671f"},"next":{"title":"react\u7ec4\u4ef6\u4f18\u5316","permalink":"/frontend/\u524d\u7aef\u6846\u67b6/React/react\u7ec4\u4ef6\u4f18\u5316"}}');var r=t(4848),s=t(8453);const c={},l=void 0,d={},i=[{value:"<strong>1. \u521b\u5efa Context</strong>",id:"1-\u521b\u5efa-context",level:3},{value:"<strong>2. Class \u7ec4\u4ef6\u4e2d\u4f7f\u7528 Context</strong>",id:"2-class-\u7ec4\u4ef6\u4e2d\u4f7f\u7528-context",level:3},{value:"<strong>\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528 Consumer\uff08\u65e7\u7248\uff09</strong>",id:"\u65b9\u5f0f\u4e00\u4f7f\u7528-consumer\u65e7\u7248",level:4},{value:"<strong>\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528 static contextType\uff08\u65b0\u7248\uff09</strong>",id:"\u65b9\u5f0f\u4e8c\u4f7f\u7528-static-contexttype\u65b0\u7248",level:4},{value:"<strong>Provider \u4f7f\u7528\u793a\u4f8b</strong>",id:"provider-\u4f7f\u7528\u793a\u4f8b",level:4},{value:"<strong>3. \u51fd\u6570\u7ec4\u4ef6\u4e2d\u4f7f\u7528 Context</strong>",id:"3-\u51fd\u6570\u7ec4\u4ef6\u4e2d\u4f7f\u7528-context",level:3},{value:"<strong>\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528 useContext Hook\uff08\u63a8\u8350\uff09</strong>",id:"\u65b9\u5f0f\u4e00\u4f7f\u7528-usecontext-hook\u63a8\u8350",level:4},{value:"<strong>\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528 Consumer\uff08\u4e0d\u5e38\u7528\uff09</strong>",id:"\u65b9\u5f0f\u4e8c\u4f7f\u7528-consumer\u4e0d\u5e38\u7528",level:4},{value:"<strong>4. \u591a\u5c42 Context \u5d4c\u5957</strong>",id:"4-\u591a\u5c42-context-\u5d4c\u5957",level:3},{value:"<strong>5. \u66f4\u65b0 Context \u503c</strong>",id:"5-\u66f4\u65b0-context-\u503c",level:3},{value:"<strong>6. \u6027\u80fd\u4f18\u5316\uff1auseMemo \u5305\u88f9 Provider</strong>",id:"6-\u6027\u80fd\u4f18\u5316usememo-\u5305\u88f9-provider",level:3},{value:"<strong>\u603b\u7ed3</strong>",id:"\u603b\u7ed3",level:3}];function x(e){const n={code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"\u5728 React \u4e2d\uff0cContext API \u7528\u4e8e\u8de8\u5c42\u7ea7\u4f20\u9012\u6570\u636e\uff0c\u907f\u514d props drilling\u3002Class \u7ec4\u4ef6\u548c\u51fd\u6570\u7ec4\u4ef6\u4f7f\u7528 Context \u7684\u65b9\u5f0f\u6709\u6240\u4e0d\u540c\uff0c\u4ee5\u4e0b\u662f\u5b83\u4eec\u7684\u591a\u79cd\u7528\u6cd5\u53ca\u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u521b\u5efa-context",children:(0,r.jsx)(n.strong,{children:"1. \u521b\u5efa Context"})}),"\n",(0,r.jsx)(n.p,{children:"\u9996\u5148\u9700\u8981\u521b\u5efa\u4e00\u4e2a Context \u5bf9\u8c61\uff0c\u901a\u5e38\u5728\u5355\u72ec\u7684\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// MyContext.js\nimport React from 'react';\n\nconst MyContext = React.createContext(defaultValue); // defaultValue \u53ef\u9009\n\nexport const MyProvider = MyContext.Provider;\nexport const MyConsumer = MyContext.Consumer; // \u7c7b\u7ec4\u4ef6\u4f7f\u7528\nexport default MyContext; // \u51fd\u6570\u7ec4\u4ef6\u4f7f\u7528 useContext\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-class-\u7ec4\u4ef6\u4e2d\u4f7f\u7528-context",children:(0,r.jsx)(n.strong,{children:"2. Class \u7ec4\u4ef6\u4e2d\u4f7f\u7528 Context"})}),"\n",(0,r.jsx)(n.h4,{id:"\u65b9\u5f0f\u4e00\u4f7f\u7528-consumer\u65e7\u7248",children:(0,r.jsx)(n.strong,{children:"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528 Consumer\uff08\u65e7\u7248\uff09"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"import React from 'react';\nimport { MyConsumer } from './MyContext';\n\nclass ChildComponent extends React.Component {\n  render() {\n    return (\n      <MyConsumer>\n        {(contextValue) => (\n          <div>Value from context: {contextValue}</div>\n        )}\n      </MyConsumer>\n    );\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"\u65b9\u5f0f\u4e8c\u4f7f\u7528-static-contexttype\u65b0\u7248",children:(0,r.jsx)(n.strong,{children:"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528 static contextType\uff08\u65b0\u7248\uff09"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"import React from 'react';\nimport MyContext from './MyContext';\n\nclass ChildComponent extends React.Component {\n  static contextType = MyContext; // \u7ed1\u5b9a Context\n\n  render() {\n    return <div>Value from context: {this.context}</div>;\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"provider-\u4f7f\u7528\u793a\u4f8b",children:(0,r.jsx)(n.strong,{children:"Provider \u4f7f\u7528\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"import React from 'react';\nimport { MyProvider } from './MyContext';\n\nclass ParentComponent extends React.Component {\n  state = { theme: 'light' };\n\n  render() {\n    return (\n      <MyProvider value={this.state.theme}>\n        <ChildComponent />\n      </MyProvider>\n    );\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-\u51fd\u6570\u7ec4\u4ef6\u4e2d\u4f7f\u7528-context",children:(0,r.jsx)(n.strong,{children:"3. \u51fd\u6570\u7ec4\u4ef6\u4e2d\u4f7f\u7528 Context"})}),"\n",(0,r.jsx)(n.h4,{id:"\u65b9\u5f0f\u4e00\u4f7f\u7528-usecontext-hook\u63a8\u8350",children:(0,r.jsx)(n.strong,{children:"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528 useContext Hook\uff08\u63a8\u8350\uff09"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"import React, { useContext } from 'react';\nimport MyContext from './MyContext';\n\nfunction ChildComponent() {\n  const contextValue = useContext(MyContext); // \u83b7\u53d6 context \u503c\n  return <div>Value from context: {contextValue}</div>;\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"\u65b9\u5f0f\u4e8c\u4f7f\u7528-consumer\u4e0d\u5e38\u7528",children:(0,r.jsx)(n.strong,{children:"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528 Consumer\uff08\u4e0d\u5e38\u7528\uff09"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"import React from 'react';\nimport { MyConsumer } from './MyContext';\n\nconst ChildComponent = () => (\n  <MyConsumer>\n    {(contextValue) => <div>Value from context: {contextValue}</div>}\n  </MyConsumer>\n);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-\u591a\u5c42-context-\u5d4c\u5957",children:(0,r.jsx)(n.strong,{children:"4. \u591a\u5c42 Context \u5d4c\u5957"})}),"\n",(0,r.jsx)(n.p,{children:"\u53ef\u4ee5\u5d4c\u5957\u591a\u4e2a Provider\uff0c\u6bcf\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u6d88\u8d39\u4e0d\u540c\u7684 Context\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// UserContext.js\nexport const UserProvider = React.createContext().Provider;\n\n// ThemeContext.js\nexport const ThemeProvider = React.createContext().Provider;\n\n// \u5d4c\u5957\u4f7f\u7528\nfunction App() {\n  const user = { name: 'John' };\n  const theme = { color: 'blue' };\n\n  return (\n    <UserProvider value={user}>\n      <ThemeProvider value={theme}>\n        <ChildComponent />\n      </ThemeProvider>\n    </UserProvider>\n  );\n}\n\n// \u51fd\u6570\u7ec4\u4ef6\u4e2d\u6d88\u8d39\u591a\u4e2a Context\nfunction ChildComponent() {\n  const user = useContext(UserContext);\n  const theme = useContext(ThemeContext);\n  return (\n    <div style={{ color: theme.color }}>\n      Hello, {user.name}\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-\u66f4\u65b0-context-\u503c",children:(0,r.jsx)(n.strong,{children:"5. \u66f4\u65b0 Context \u503c"})}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u5e38\u5c06\u4fee\u6539 Context \u7684\u65b9\u6cd5\u4e5f\u653e\u5728 Context \u4e2d\u4f20\u9012\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// AuthContext.js\nimport React, { useState } from 'react';\n\nconst AuthContext = React.createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n\n  const login = (username) => {\n    setUser({ username });\n  };\n\n  const logout = () => {\n    setUser(null);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthContext;\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// \u4f7f\u7528 Context \u7684\u7ec4\u4ef6\nfunction LoginButton() {\n  const { login } = useContext(AuthContext);\n  return <button onClick={() => login('John')}>Login</button>;\n}\n\nfunction LogoutButton() {\n  const { logout } = useContext(AuthContext);\n  return <button onClick={logout}>Logout</button>;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"6-\u6027\u80fd\u4f18\u5316usememo-\u5305\u88f9-provider",children:(0,r.jsx)(n.strong,{children:"6. \u6027\u80fd\u4f18\u5316\uff1auseMemo \u5305\u88f9 Provider"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5f53 Context \u503c\u9891\u7e41\u53d8\u5316\u65f6\uff0c\u53ef\u80fd\u5bfc\u81f4\u6240\u6709\u6d88\u8d39\u7ec4\u4ef6\u4e0d\u5fc5\u8981\u7684\u91cd\u6e32\u67d3\u3002\u53ef\u4ee5\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"useMemo"})," \u4f18\u5316\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"function App() {\n  const [count, setCount] = useState(0);\n  \n  // \u4ec5\u5f53 count \u53d8\u5316\u65f6\u624d\u91cd\u65b0\u521b\u5efa contextValue\n  const contextValue = useMemo(() => ({ count, setCount }), [count]);\n\n  return (\n    <MyContext.Provider value={contextValue}>\n      <ChildComponent />\n    </MyContext.Provider>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u603b\u7ed3",children:(0,r.jsx)(n.strong,{children:"\u603b\u7ed3"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"\u573a\u666f"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Class \u7ec4\u4ef6"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"\u51fd\u6570\u7ec4\u4ef6"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u6d88\u8d39 Context"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"static contextType"})," \u6216 ",(0,r.jsx)(n.code,{children:"<Consumer>"})]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"useContext"})," Hook"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u4f20\u9012 Context"})}),(0,r.jsxs)(n.td,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"<Provider>"})," \u5305\u88f9\u5b50\u7ec4\u4ef6"]}),(0,r.jsx)(n.td,{children:"\u540c\u4e0a"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u66f4\u65b0 Context \u503c"})}),(0,r.jsx)(n.td,{children:"\u5c06 setState \u65b9\u6cd5\u901a\u8fc7 Context \u4f20\u9012"}),(0,r.jsx)(n.td,{children:"\u540c\u4e0a"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u6027\u80fd\u4f18\u5316"})}),(0,r.jsx)(n.td,{children:"\u65e0\u7279\u6b8a\u4f18\u5316"}),(0,r.jsxs)(n.td,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"useMemo"})," \u5305\u88f9 Provider"]})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"Context \u662f\u89e3\u51b3\u591a\u5c42\u7ea7\u6570\u636e\u4f20\u9012\u7684\u6709\u6548\u65b9\u5f0f\uff0c\u4f46\u5e94\u907f\u514d\u8fc7\u5ea6\u4f7f\u7528\uff08\u53ef\u80fd\u5bfc\u81f4\u7ec4\u4ef6\u590d\u7528\u6027\u964d\u4f4e\uff09\u3002\u5efa\u8bae\u4ec5\u5728\u786e\u5b9e\u9700\u8981\u8de8\u5c42\u7ea7\u5171\u4eab\u6570\u636e\u65f6\u4f7f\u7528\u3002"})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>l});var o=t(6540);const r={},s=o.createContext(r);function c(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);